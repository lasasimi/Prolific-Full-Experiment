{{ block title }}
<link rel="stylesheet" href="{% static 'global/style.css' %}"/>
{{ endblock }}

{{ block content }}

<div class="card bg-mid m-0">
  <h2 class="card-header">üîä Check your audio</h2>
    <div class="card-body">
        <p>We require you to enable your audio <strong>so you can receive important sound notifications during the study.</strong> Please turn on your audio and set the volume up. We don‚Äôt record any audio. Press ‚ÄòPlay‚Äô below, listen to the sound, and then select what you heard.

        <audio id="checkAudio" src="{{ static 'test.mp3' }}" preload="auto"></audio>

        <div style="margin: 10px 0;">
            <button type="button" id="playBtn" class="btn">‚ñ∂Ô∏è Play</button>
            <button type="button" id="pauseBtn" class="btn">‚è∏Ô∏è Pause</button>
            <button type="button" id="stopBtn" class="btn">‚èπÔ∏è Stop</button>
            <button type="button" id="volUpBtn" class="btn">üîä Vol +</button>
            <button type="button" id="volDownBtn" class="btn">üîâ Vol -</button>
        </div>
    
        <strong>{{ form.audio_answer.label }}</strong><br>
        {{ form.audio_answer }}
        <br><br>
        <strong>If you do not want to enable audio output, we kindly ask you to return the study.</strong>

    </div>

</div>

<br>
<button class="next-button" type="submit">Next</button>

{{ endblock }}
{{ block scripts}}

<script>
const audio = document.getElementById('checkAudio');

document.getElementById('playBtn').addEventListener('click', async () => {
    try {
        await audio.play();
    } catch (e) {
        alert('Click play again to allow audio playback.');
    }
});

document.getElementById('pauseBtn').addEventListener('click', () => {
    audio.pause();
});

document.getElementById('stopBtn').addEventListener('click', () => {
    audio.pause();
    audio.currentTime = 0;
});

document.getElementById('volUpBtn').addEventListener('click', () => {
    audio.volume = Math.min(audio.volume + 0.1, 1);
});

document.getElementById('volDownBtn').addEventListener('click', () => {
    audio.volume = Math.max(audio.volume - 0.1, 0);
});
</script>
{{ endblock}}
{{ block style }}
<style>
.scale-container {
    display: flex;
    justify-content: space-between;
    margin: 10px 0;
    text-align: center;
}

.scale-option {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0px 5px 5px;
    white-space: normal;
}

.scale-number {
    font-weight: normal;
    font-size: normal;
    margin-bottom: 4px;
}

.scale-label {
    margin-top: 4px;
    font-size: 0.9em;
}
.btn {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid #ccc;
  background: white;
  cursor: pointer;
  user-select: none;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}
.btn:active { transform: translateY(1px); }
.btn.small { 
    padding: 6px 8px; 
    font-size: 0.9rem; 
    border-radius: 8px;
    border: 1px solid #ccc;
    background: white;
    cursor: pointer;
    user-select: none;
    box-shadow: 0 1px 2px rgba(0,0,0,0.04);
    }
</style>

{{ endblock}}

